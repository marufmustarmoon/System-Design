<!doctype html>
<html lang="bn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>System Design Interview Guide</title>
    <meta name="description" content="বাংলায় System Design topics, story-driven explanation, and interview-ready breakdowns.">
    <meta name="theme-color" content="#0b7285">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">

    <style>
      :root {
        --bg: #eef4fb;
        --bg-soft: #f7fbff;
        --surface: #ffffff;
        --surface-muted: #f5f8fc;
        --text: #142033;
        --muted: #4b5e75;
        --border: #d8e2ef;
        --accent: #0b7285;
        --accent-2: #f08c00;
        --accent-soft: #e2f1f4;
        --focus: #0077b6;
        --shadow-1: 0 8px 30px rgba(16, 42, 67, 0.08);
        --shadow-2: 0 16px 40px rgba(16, 42, 67, 0.12);
        --reading-width: 78ch;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        min-height: 100%;
      }

      body {
        font-family: "Hind Siliguri", system-ui, sans-serif;
        color: var(--text);
        background:
          radial-gradient(1000px 420px at 8% -6%, #d8f0f2 0%, transparent 60%),
          radial-gradient(900px 380px at 100% -14%, #ffe9cf 0%, transparent 62%),
          linear-gradient(180deg, var(--bg-soft), var(--bg));
      }

      body::before {
        content: "";
        position: fixed;
        inset: 0;
        pointer-events: none;
        background:
          linear-gradient(120deg, rgba(255, 255, 255, 0.24) 0%, rgba(255, 255, 255, 0) 38%),
          repeating-linear-gradient(
            135deg,
            rgba(20, 32, 51, 0.02) 0,
            rgba(20, 32, 51, 0.02) 2px,
            transparent 2px,
            transparent 10px
          );
      }

      #read-progress {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
        height: 4px;
        width: 0;
        background: linear-gradient(90deg, var(--accent), #26a69a 60%, var(--accent-2));
        box-shadow: 0 1px 8px rgba(11, 114, 133, 0.6);
        transition: width 0.15s linear;
      }

      .app-name-link,
      .app-name {
        font-family: "Space Grotesk", sans-serif;
        letter-spacing: 0.2px;
      }

      .app-name {
        font-size: 1.06rem;
        margin: 0 0 14px;
        padding: 8px 2px 14px;
        border-bottom: 1px solid var(--border);
      }

      .app-name-link {
        color: var(--text) !important;
        font-weight: 700;
      }

      .sidebar {
        width: 340px;
        border-right: 1px solid var(--border);
        background:
          linear-gradient(180deg, #f8fbff 0%, #eef3fa 100%);
        box-shadow: inset -1px 0 0 rgba(20, 32, 51, 0.02);
      }

      .sidebar-nav {
        padding-bottom: 44px;
      }

      .sidebar ul li a {
        border-radius: 10px;
        color: var(--muted);
        line-height: 1.45;
        padding: 6px 10px 6px 12px;
        transition: all 0.16s ease;
      }

      .sidebar ul li a:hover {
        color: var(--text);
        background: #eef5ff;
        transform: translateX(2px);
      }

      .sidebar ul li.active > a {
        color: var(--accent);
        background: var(--accent-soft);
        border-left: 3px solid var(--accent);
        font-weight: 700;
      }

      .search {
        margin-bottom: 14px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--border);
      }

      .search input {
        width: 100%;
        border: 1px solid var(--border);
        background: var(--surface);
        color: var(--text);
        border-radius: 12px;
        padding: 11px 12px;
        font-size: 0.95rem;
      }

      .search input:focus-visible {
        outline: 3px solid rgba(0, 119, 182, 0.2);
        border-color: var(--focus);
      }

      .content {
        padding-top: 34px;
      }

      .markdown-section {
        max-width: var(--reading-width);
        margin: 0 auto;
        padding: 2.5rem 2.6rem 3rem;
        background: var(--surface);
        border: 1px solid var(--border);
        border-radius: 22px;
        box-shadow: var(--shadow-1);
        animation: contentIn 0.3s ease;
      }

      @keyframes contentIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .markdown-section > :first-child {
        margin-top: 0;
      }

      .markdown-section h1,
      .markdown-section h2,
      .markdown-section h3,
      .markdown-section h4 {
        font-family: "Space Grotesk", "Hind Siliguri", sans-serif;
        line-height: 1.22;
        letter-spacing: 0.2px;
      }

      .markdown-section h1 {
        font-size: clamp(1.8rem, 2.8vw, 2.35rem);
        margin-bottom: 1.15rem;
      }

      .markdown-section h2 {
        font-size: clamp(1.4rem, 2.2vw, 1.8rem);
        margin-top: 2rem;
        border-left: 4px solid var(--accent);
        padding-left: 12px;
      }

      .markdown-section h3 {
        font-size: clamp(1.14rem, 1.9vw, 1.34rem);
        margin-top: 1.45rem;
      }

      .markdown-section p,
      .markdown-section li {
        font-size: 1.02rem;
        line-height: 1.85;
        color: #223449;
      }

      .markdown-section p code,
      .markdown-section li code,
      .markdown-section table code {
        background: #edf4ff;
        border: 1px solid #dbe7fb;
        color: #0a5c7a;
        border-radius: 7px;
        padding: 0.12rem 0.4rem;
      }

      .markdown-section blockquote {
        margin: 1.1rem 0;
        border-left: 4px solid var(--accent-2);
        background: #fff8ee;
        color: #31465f;
        padding: 0.8rem 1rem;
        border-radius: 10px;
      }

      .markdown-section hr {
        border: none;
        border-top: 1px solid var(--border);
      }

      .markdown-section a {
        color: var(--accent);
      }

      .markdown-section a:hover {
        color: #075766;
      }

      .markdown-section pre > code {
        font-size: 0.9rem;
        line-height: 1.6;
      }

      .anchor span {
        color: var(--text);
      }

      .sidebar-toggle {
        background: var(--surface);
        border-top-right-radius: 12px;
        border-right: 1px solid var(--border);
        border-top: 1px solid var(--border);
        box-shadow: var(--shadow-1);
      }

      .pagination-item {
        border-radius: 14px;
        border: 1px solid var(--border);
        background: var(--surface-muted);
        transition: all 0.15s ease;
      }

      .pagination-item:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-1);
      }

      .docsify-copy-code-button {
        border-radius: 10px !important;
      }

      .docsify-copy-code-button,
      .docsify-copy-code-button span {
        font-family: "Space Grotesk", sans-serif !important;
      }

      .listen-panel {
        position: fixed;
        right: 16px;
        bottom: 18px;
        z-index: 9998;
        width: min(340px, calc(100vw - 24px));
        padding: 12px;
        border: 1px solid var(--border);
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-2);
      }

      .listen-controls {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }

      .listen-btn {
        appearance: none;
        border: 1px solid var(--border);
        border-radius: 10px;
        background: var(--surface-muted);
        color: var(--text);
        font-family: "Space Grotesk", "Hind Siliguri", sans-serif;
        font-size: 0.9rem;
        font-weight: 600;
        padding: 8px 10px;
        cursor: pointer;
      }

      .listen-btn:hover {
        border-color: var(--accent);
      }

      .listen-btn.is-primary {
        background: var(--accent);
        border-color: var(--accent);
        color: #fff;
      }

      .listen-btn:disabled {
        cursor: not-allowed;
        opacity: 0.45;
      }

      .listen-rate {
        margin-left: auto;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: var(--muted);
        font-size: 0.84rem;
      }

      .listen-rate select {
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 4px 6px;
        background: var(--surface);
        color: var(--text);
      }

      .listen-status {
        margin-top: 8px;
        color: var(--muted);
        font-size: 0.84rem;
        line-height: 1.35;
      }

      .listen-progress {
        margin-top: 6px;
        color: #1f3651;
        font-size: 0.82rem;
        font-weight: 600;
      }

      @media (max-width: 960px) {
        .content {
          padding-top: 22px;
        }

        .markdown-section {
          margin: 0 12px 18px;
          max-width: none;
          padding: 1.5rem 1.1rem 2rem;
          border-radius: 16px;
          box-shadow: var(--shadow-1);
        }

        .sidebar {
          width: 308px;
        }

        .listen-panel {
          right: 10px;
          bottom: 12px;
          width: min(360px, calc(100vw - 16px));
        }
      }

      @media (max-width: 640px) {
        .markdown-section p,
        .markdown-section li {
          font-size: 0.98rem;
        }

        .markdown-section h1 {
          font-size: 1.55rem;
        }

        .markdown-section h2 {
          font-size: 1.3rem;
        }

        .listen-rate {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <div id="read-progress" aria-hidden="true"></div>
    <div id="app"></div>
    <div class="listen-panel" id="listen-panel" hidden>
      <div class="listen-controls">
        <button type="button" class="listen-btn is-primary" id="listen-toggle">শুনুন</button>
        <button type="button" class="listen-btn" id="listen-stop" disabled>বন্ধ</button>
        <label class="listen-rate" for="listen-rate">
          গতি
          <select id="listen-rate">
            <option value="0.9">0.9x</option>
            <option value="1" selected>1x</option>
            <option value="1.1">1.1x</option>
            <option value="1.2">1.2x</option>
          </select>
        </label>
      </div>
      <div class="listen-status" id="listen-status">এই পেজ শুনতে "শুনুন" চাপুন।</div>
      <div class="listen-progress" id="listen-progress-time">সময়: 00:00</div>
    </div>

    <script>
      (function () {
        var speechSupported = "speechSynthesis" in window && "SpeechSynthesisUtterance" in window;
        var isAndroid = /android/i.test((navigator.userAgent || "").toLowerCase());
        var speakState = {
          speaking: false,
          paused: false,
          voices: [],
          selectedVoice: null,
          startedAt: 0,
          elapsedMs: 0,
          timerId: null,
          sessionId: 0
        };

        function getNoBanglaVoiceMessage() {
          if (isAndroid) {
            return "বাংলা voice পাওয়া যায়নি। Android-এ Google TTS থেকে বাংলা voice install/enable করুন।";
          }
          return "বাংলা voice পাওয়া যায়নি। Desktop Chrome-এ OS-এর Bengali TTS voice install/enable করুন, অথবা Android device-এ test করুন।";
        }

        function getVoiceScore(voice) {
          var lang = (voice.lang || "").toLowerCase();
          var name = (voice.name || "").toLowerCase();
          var score = 0;
          if (lang.indexOf("bn") === 0) score += 10;
          if (name.indexOf("bangla") >= 0 || name.indexOf("bengali") >= 0) score += 6;
          if (voice.default) score += 1;
          return score;
        }

        function choosePreferredVoice() {
          if (!speechSupported) return null;
          var voices = window.speechSynthesis.getVoices() || [];
          speakState.voices = voices.slice();
          if (!voices.length) {
            speakState.selectedVoice = null;
            return null;
          }

          var banglaVoices = voices.filter(function (voice) {
            return (voice.lang || "").toLowerCase().indexOf("bn") === 0;
          });
          if (!banglaVoices.length) {
            speakState.selectedVoice = null;
            return null;
          }

          banglaVoices.sort(function (a, b) {
            return getVoiceScore(b) - getVoiceScore(a);
          });
          speakState.selectedVoice = banglaVoices[0];
          return speakState.selectedVoice;
        }

        function formatClock(ms) {
          var total = Math.max(0, Math.floor(ms / 1000));
          var minutes = Math.floor(total / 60);
          var seconds = total % 60;
          var m = String(minutes).padStart(2, "0");
          var s = String(seconds).padStart(2, "0");
          return m + ":" + s;
        }

        function snapshotElapsed() {
          if (speakState.speaking && !speakState.paused && speakState.startedAt > 0) {
            speakState.elapsedMs = Date.now() - speakState.startedAt;
          }
          return speakState.elapsedMs;
        }

        function updateProgressTime() {
          var node = document.getElementById("listen-progress-time");
          if (!node) return;
          var elapsed = snapshotElapsed();
          node.textContent = "সময়: " + formatClock(elapsed);
        }

        function stopProgressTicker() {
          if (speakState.timerId) {
            clearInterval(speakState.timerId);
            speakState.timerId = null;
          }
        }

        function startProgressTicker() {
          stopProgressTicker();
          updateProgressTime();
          speakState.timerId = setInterval(updateProgressTime, 300);
        }

        function getReadableText() {
          var section = document.querySelector(".markdown-section");
          if (!section) return "";

          var nodes = section.querySelectorAll("h1, h2, h3, h4, p, li, blockquote");
          var chunks = [];
          for (var i = 0; i < nodes.length; i += 1) {
            var t = (nodes[i].innerText || nodes[i].textContent || "").replace(/\s+/g, " ").trim();
            if (t) chunks.push(t);
          }
          return chunks.join(". ");
        }

        function splitTextIntoChunks(text, maxLen) {
          var clean = (text || "").trim();
          if (!clean) return [];
          if (clean.length <= maxLen) return [clean];

          var sentences = clean.split(/[।.!?]+\s+/);
          var result = [];
          var current = "";

          for (var i = 0; i < sentences.length; i += 1) {
            var s = sentences[i];
            if (!s) continue;
            if (!current) {
              current = s;
              continue;
            }
            if ((current + " " + s).length <= maxLen) {
              current += " " + s;
            } else {
              result.push(current);
              current = s;
            }
          }
          if (current) result.push(current);
          return result;
        }

        function updateListenStatus(text) {
          var node = document.getElementById("listen-status");
          if (node) node.textContent = text;
        }

        function resetListenButtons(options) {
          var config = options || {};
          var toggle = document.getElementById("listen-toggle");
          var stop = document.getElementById("listen-stop");
          if (toggle) toggle.textContent = "শুনুন";
          if (stop) stop.disabled = true;
          stopProgressTicker();

          if (!config.keepElapsed) {
            speakState.elapsedMs = 0;
          }
          speakState.startedAt = 0;
          speakState.speaking = false;
          speakState.paused = false;
          updateProgressTime();
        }

        function stopSpeaking(message) {
          if (!speechSupported) return;
          snapshotElapsed();
          speakState.sessionId += 1;
          window.speechSynthesis.cancel();
          resetListenButtons();
          if (message) {
            updateListenStatus(message);
          } else {
            updateListenStatus("শোনা বন্ধ করা হয়েছে।");
          }
        }

        function speakCurrentPage() {
          if (!speechSupported) return;
          var content = getReadableText();
          if (!content) {
            updateListenStatus("এই পেজে readable content পাওয়া যায়নি।");
            return;
          }

          window.speechSynthesis.cancel();
          var voice = choosePreferredVoice();
          if (!voice) {
            if (!speakState.voices.length) {
              updateListenStatus("Voice list load হচ্ছে... কয়েক সেকেন্ড পরে আবার চেষ্টা করুন।");
            } else {
              updateListenStatus(getNoBanglaVoiceMessage());
            }
            return;
          }

          var rateSelect = document.getElementById("listen-rate");
          var rate = rateSelect ? parseFloat(rateSelect.value || "1") : 1;
          var pieces = splitTextIntoChunks(content, 900);
          var total = pieces.length;
          var completed = 0;
          var sessionId = speakState.sessionId + 1;
          var toggle = document.getElementById("listen-toggle");
          var stop = document.getElementById("listen-stop");

          speakState.sessionId = sessionId;
          speakState.elapsedMs = 0;
          speakState.startedAt = Date.now();
          if (toggle) toggle.textContent = "থামান";
          if (stop) stop.disabled = false;
          speakState.speaking = true;
          speakState.paused = false;
          startProgressTicker();
          updateListenStatus("বাংলায় পড়া শুরু হয়েছে।");

          for (var i = 0; i < pieces.length; i += 1) {
            var utter = new SpeechSynthesisUtterance(pieces[i]);
            utter.voice = voice;
            utter.lang = voice.lang || "bn-BD";
            utter.rate = rate;
            utter.pitch = 1;
            utter.onend = function () {
              if (sessionId !== speakState.sessionId) return;
              completed += 1;
              if (completed >= total && !window.speechSynthesis.speaking) {
                var doneAt = formatClock(snapshotElapsed());
                resetListenButtons({ keepElapsed: true });
                updateListenStatus("পড়া শেষ হয়েছে: " + doneAt + "।");
              }
            };
            utter.onerror = function () {
              if (sessionId !== speakState.sessionId) return;
              resetListenButtons();
              updateListenStatus("শোনা ব্যর্থ হয়েছে।");
            };
            window.speechSynthesis.speak(utter);
          }
        }

        function toggleSpeak() {
          if (!speechSupported) return;
          var toggle = document.getElementById("listen-toggle");
          var stop = document.getElementById("listen-stop");

          if (window.speechSynthesis.speaking && !window.speechSynthesis.paused) {
            window.speechSynthesis.pause();
            snapshotElapsed();
            speakState.paused = true;
            if (toggle) toggle.textContent = "চালান";
            if (stop) stop.disabled = false;
            updateListenStatus("থেমেছে: " + formatClock(speakState.elapsedMs) + "। চালান চাপলে এখান থেকেই চলবে।");
            updateProgressTime();
            return;
          }

          if (window.speechSynthesis.paused) {
            window.speechSynthesis.resume();
            speakState.startedAt = Date.now() - speakState.elapsedMs;
            speakState.paused = false;
            if (toggle) toggle.textContent = "থামান";
            if (stop) stop.disabled = false;
            startProgressTicker();
            updateListenStatus("আবার শুরু: " + formatClock(speakState.elapsedMs) + " থেকে।");
            return;
          }

          speakCurrentPage();
        }

        function refreshVoiceAvailability() {
          var voice = choosePreferredVoice();
          var toggle = document.getElementById("listen-toggle");
          var stop = document.getElementById("listen-stop");
          if (!toggle || !stop) return;

          if (!voice) {
            toggle.disabled = true;
            stop.disabled = true;
            if (!speakState.voices.length) {
              updateListenStatus("Voice list load হচ্ছে... কয়েক সেকেন্ড অপেক্ষা করুন।");
            } else {
              updateListenStatus(getNoBanglaVoiceMessage());
            }
            return;
          }

          toggle.disabled = false;
          stop.disabled = !speakState.speaking;
          updateListenStatus("এই পেজ শুনতে \"শুনুন\" চাপুন।");
        }

        function setupListeningMode() {
          var panel = document.getElementById("listen-panel");
          var toggle = document.getElementById("listen-toggle");
          var stop = document.getElementById("listen-stop");

          if (!panel || !toggle || !stop) return;

          if (!speechSupported) {
            panel.hidden = false;
            toggle.disabled = true;
            stop.disabled = true;
            updateListenStatus("এই browser-এ speech synthesis supported নয়।");
            return;
          }

          panel.hidden = false;
          refreshVoiceAvailability();
          toggle.addEventListener("click", toggleSpeak);
          stop.addEventListener("click", function () {
            stopSpeaking("শোনা বন্ধ করা হয়েছে।");
          });

          if ("onvoiceschanged" in window.speechSynthesis) {
            window.speechSynthesis.onvoiceschanged = refreshVoiceAvailability;
          }
        }

        function createScrollProgress() {
          var progressBar = document.getElementById("read-progress");
          if (!progressBar) return;

          var update = function () {
            var doc = document.documentElement;
            var scrollTop = doc.scrollTop || document.body.scrollTop;
            var scrollHeight = doc.scrollHeight - doc.clientHeight;
            var percent = scrollHeight <= 0 ? 0 : (scrollTop / scrollHeight) * 100;
            progressBar.style.width = Math.max(0, Math.min(100, percent)) + "%";
          };

          if (window.__docsifyProgressHandler) {
            window.removeEventListener("scroll", window.__docsifyProgressHandler);
          }

          window.__docsifyProgressHandler = update;
          window.addEventListener("scroll", update, { passive: true });
          update();
        }

        window.$docsify = {
          name: "System Design Guide (বাংলা)",
          repo: "",
          loadSidebar: true,
          auto2top: true,
          basePath: "/system-design-guide-bn-topics/",
          homepage: "README.md",
          relativePath: false,
          subMaxLevel: 2,
          maxLevel: 3,
          topMargin: 76,
          search: {
            placeholder: "টপিক সার্চ করুন (যেমন: sharding, caching, cap theorem)",
            noData: "এই keyword দিয়ে কোনো টপিক পাওয়া যায়নি",
            depth: 3,
            path: "auto"
          },
          pagination: {
            previousText: "আগের টপিক",
            nextText: "পরের টপিক",
            crossChapter: true,
            crossChapterText: true
          },
          plugins: [
            function (hook) {
              hook.doneEach(function () {
                if (speechSupported && (window.speechSynthesis.speaking || window.speechSynthesis.paused)) {
                  window.speechSynthesis.cancel();
                }
                resetListenButtons();
                if (speechSupported) {
                  refreshVoiceAvailability();
                }
                createScrollProgress();
              });
            }
          ]
        };

        setupListeningMode();
      })();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docsify-copy-code@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/zoom-image.min.js"></script>
  </body>
</html>
